<%- include('./partials/header') %>

<div class="orders-page">
    <div class="orders-container">
        <div class="page-header">
            <h1>My Orders</h1>
            <p>View your purchase history</p>
        </div>
        
        <% if (orders.length === 0) { %>
        <div class="empty-state">
            <div class="empty-icon">ðŸ“¦</div>
            <h3>No orders yet</h3>
            <p>Start shopping to see your orders here</p>
            <a href="/shop" class="btn-primary">Browse Shop</a>
        </div>
        <% } else { %>
        <div class="orders-list">
            <% orders.forEach(order => { %>
            <div class="order-card">
                <div class="order-header">
                    <div class="order-id">
                        <span class="label">Order ID</span>
                        <code><%= order.orderId %></code>
                    </div>
                    <span class="status-badge <%= order.status %>"><%= order.status %></span>
                </div>
                <div class="order-body">
                    <div class="product-info">
                        <span class="product-name"><%= order.productName %></span>
                        <span class="product-price">â‚±<%= order.price %></span>
                    </div>
                    <div class="order-meta">
                        <% if (order.paymentMethod) { %>
                        <div class="payment-method">
                            <span class="label">Payment</span>
                            <span class="payment-badge <%= order.paymentMethod.toLowerCase() %>">
                                <%= order.paymentMethod === 'GCASH' ? 'ðŸ“± GCash' : order.paymentMethod === 'PAYPAL' ? 'ðŸ’³ PayPal' : 'ðŸ¦ Bank' %>
                            </span>
                        </div>
                        <% } %>
                        <div class="order-date">
                            <span class="label">Ordered</span>
                            <span><%= new Date(order.createdAt).toLocaleDateString() %></span>
                        </div>
                    </div>
                </div>
                <% if (order.status === 'rejected' && order.reason) { %>
                <div class="order-footer rejected">
                    <span class="label">Reason:</span> <%= order.reason %>
                </div>
                <% } %>
            </div>
            <% }) %>
        </div>
        <% } %>
    </div>
</div>

<style>
    .orders-page { padding: 2rem; min-height: calc(100vh - 70px); background: var(--bg-primary); }
    .orders-container { max-width: 800px; margin: 0 auto; }
    .page-header { margin-bottom: 2rem; }
    .page-header h1 { font-size: 1.75rem; font-weight: 800; margin-bottom: 0.5rem; }
    .page-header p { color: var(--text-secondary); }
    
    .empty-state { text-align: center; padding: 4rem 2rem; background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; }
    .empty-icon { font-size: 3rem; margin-bottom: 1rem; }
    .empty-state h3 { font-size: 1.25rem; font-weight: 700; margin-bottom: 0.5rem; }
    .empty-state p { color: var(--text-muted); margin-bottom: 1.5rem; }
    .btn-primary { display: inline-block; padding: 0.75rem 1.5rem; background: var(--accent); color: white; font-weight: 600; border-radius: 8px; }
    
    .orders-list { display: flex; flex-direction: column; gap: 1rem; }
    .order-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; overflow: hidden; }
    .order-header { display: flex; justify-content: space-between; align-items: center; padding: 1rem 1.25rem; border-bottom: 1px solid var(--border); background: var(--bg-secondary); flex-wrap: wrap; gap: 0.75rem; }
    .order-id .label { display: block; font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: 0.25rem; }
    .order-id code { background: var(--bg-tertiary); padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.85rem; word-break: break-all; }
    .status-badge { padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.75rem; font-weight: 600; text-transform: uppercase; white-space: nowrap; }
    .status-badge.pending { background: rgba(250, 176, 5, 0.2); color: #fab005; }
    .status-badge.completed { background: rgba(59, 165, 92, 0.2); color: #3ba55c; }
    .status-badge.rejected { background: rgba(237, 66, 69, 0.2); color: #ed4245; }
    .order-body { display: flex; justify-content: space-between; align-items: center; padding: 1.25rem; flex-wrap: wrap; gap: 1rem; }
    .product-name { display: block; font-weight: 600; margin-bottom: 0.25rem; }
    .product-price { color: var(--green); font-weight: 700; }
    .order-meta { display: flex; gap: 2rem; align-items: flex-end; flex-wrap: wrap; }
    .order-date .label, .payment-method .label { display: block; font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: 0.25rem; }
    .payment-badge { display: inline-block; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.8rem; font-weight: 600; }
    .payment-badge.gcash { background: rgba(0, 123, 255, 0.15); color: #007bff; }
    .payment-badge.paypal { background: rgba(0, 48, 135, 0.15); color: #0070ba; }
    .payment-badge.bank { background: rgba(40, 167, 69, 0.15); color: #28a745; }
    .order-footer { padding: 0.75rem 1.25rem; font-size: 0.85rem; }
    .order-footer.rejected { background: rgba(237, 66, 69, 0.1); color: #ed4245; }
    .order-footer .label { font-weight: 600; }
    
    @media (max-width: 768px) {
        .orders-page { padding: 1.5rem 1rem; }
        .page-header h1 { font-size: 1.5rem; }
        .order-header { flex-direction: column; align-items: flex-start; }
        .order-body { flex-direction: column; align-items: flex-start; }
        .order-meta { width: 100%; gap: 1rem; }
        .empty-state { padding: 3rem 1.5rem; }
    }
</style>

<%- include('./partials/footer') %>
