<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= guildName %> - Shop</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/landing.css">
    <style>
        /* Preloader Styles */
        .preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-primary, #ffffff);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }
        .preloader.hidden {
            opacity: 0;
            visibility: hidden;
        }
        .preloader-content {
            text-align: center;
        }
        .preloader-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid var(--border, #fce7f3);
            border-top-color: var(--accent, #ec4899);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin: 0 auto 1rem;
        }
        .preloader-text {
            font-family: 'Nunito', sans-serif;
            font-weight: 700;
            font-size: 1.1rem;
            background: linear-gradient(135deg, #ec4899, #f472b6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        /* Page Transition */
        .page-transition {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-primary, #ffffff);
            z-index: 9998;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .page-transition.active {
            opacity: 1;
            visibility: visible;
        }
        .page-transition .preloader-spinner {
            width: 40px;
            height: 40px;
        }
    </style>
    <script>
        // Apply saved theme immediately to prevent flash
        (function() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                document.documentElement.setAttribute('data-theme', savedTheme);
            } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.documentElement.setAttribute('data-theme', 'dark');
            } else {
                document.documentElement.setAttribute('data-theme', 'light');
            }
        })();
    </script>
</head>
<body>
    <!-- Preloader -->
    <div class="preloader" id="preloader">
        <div class="preloader-content">
            <div class="preloader-spinner"></div>
            <div class="preloader-text">Loading...</div>
        </div>
    </div>
    
    <!-- Page Transition Overlay -->
    <div class="page-transition" id="pageTransition">
        <div class="preloader-spinner"></div>
    </div>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="/" class="nav-logo">
                <img src="<%= guildIcon %>" alt="<%= guildName %>">
                <span><%= guildName %></span>
            </a>
            <div class="nav-links">
                <a href="#about" class="nav-link">About</a>
                <a href="#features" class="nav-link">Features</a>
                <a href="/shop" class="nav-link">Shop</a>
                
                <!-- Theme Toggle -->
                <button class="theme-toggle" id="themeToggle" title="Toggle theme">
                    <svg class="sun-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="5"/>
                        <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
                    </svg>
                    <svg class="moon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                    </svg>
                </button>
                
                <% if (typeof user !== 'undefined' && user) { %>
                <div class="nav-user">
                    <img src="<%= user.avatar %>" alt="<%= user.username %>" class="nav-avatar">
                    <div class="nav-dropdown">
                        <span class="nav-username"><%= user.username %></span>
                        <span class="nav-role <%= user.role %>"><%= user.role %></span>
                        <div class="nav-dropdown-links">
                            <a href="/my-orders">My Orders</a>
                            <% if (user.role === 'staff' || user.role === 'admin') { %>
                            <a href="/staff">Staff Panel</a>
                            <% } %>
                            <% if (user.role === 'admin') { %>
                            <a href="/admin">Admin Panel</a>
                            <% } %>
                            <a href="/auth/logout" class="logout">Logout</a>
                        </div>
                    </div>
                </div>
                <% } else { %>
                <a href="/login" class="btn btn-outline">Login</a>
                <% } %>
                <a href="https://discord.gg/your-invite" target="_blank" class="btn btn-primary">Join Server</a>
            </div>
            <button class="nav-toggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-bg">
            <% if (guildBanner) { %>
            <img src="<%= guildBanner %>" alt="" class="hero-banner-img">
            <% } %>
            <div class="hero-gradient"></div>
        </div>
        <div class="hero-content">
            <div class="hero-badge">
                <span class="badge-dot"></span>
                <%= memberCount.toLocaleString() %> members
            </div>
            <h1 class="hero-title">
                Welcome to
                <span class="gradient-text"><%= guildName %></span>
            </h1>
            <% if (guildDescription) { %>
            <p class="hero-description"><%= guildDescription %></p>
            <% } else { %>
            <p class="hero-description">
                Join our amazing community! Browse our exclusive shop for avatar decorations, 
                profile effects, and special bundles.
            </p>
            <% } %>
            <div class="hero-buttons">
                <a href="https://discord.gg/your-invite" target="_blank" class="btn btn-primary btn-lg">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03z"/>
                    </svg>
                    Join Server
                </a>
                <a href="/shop" class="btn btn-secondary btn-lg">
                    Visit Shop
                </a>
            </div>
        </div>
        <div class="hero-visual">
            <div class="hero-card">
                <div class="hero-card-header">
                    <img src="<%= guildIcon %>" alt="<%= guildName %>">
                    <div class="hero-card-info">
                        <h3><%= guildName %></h3>
                        <span class="status"><span class="status-dot"></span> <%= onlineCount.toLocaleString() %> Online</span>
                    </div>
                </div>
                <div class="hero-card-stats">
                    <div class="stat">
                        <span class="stat-value"><%= memberCount.toLocaleString() %></span>
                        <span class="stat-label">Members</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value"><%= onlineCount.toLocaleString() %></span>
                        <span class="stat-label">Online</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value"><%= boostCount %></span>
                        <span class="stat-label">Boosts</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Stats Bar -->
    <section class="stats-bar">
        <div class="stats-container">
            <div class="stat-item">
                <span class="stat-number"><%= memberCount.toLocaleString() %></span>
                <span class="stat-text">Members</span>
            </div>
            <div class="stat-divider"></div>
            <div class="stat-item">
                <span class="stat-number"><%= onlineCount.toLocaleString() %></span>
                <span class="stat-text">Online</span>
            </div>
            <div class="stat-divider"></div>
            <div class="stat-item">
                <span class="stat-number">Level <%= boostLevel %></span>
                <span class="stat-text">Boost Level</span>
            </div>
            <div class="stat-divider"></div>
            <div class="stat-item">
                <span class="stat-number"><%= boostCount %></span>
                <span class="stat-text">Boosts</span>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section class="features" id="about">
        <div class="section-container">
            <div class="section-header">
                <span class="section-badge">About Us</span>
                <h2 class="section-title">Welcome to Our Community</h2>
                <p class="section-description">Join thousands of members in our growing Discord community</p>
            </div>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                        </svg>
                    </div>
                    <h3>Active Community</h3>
                    <p>Connect with <%= memberCount.toLocaleString() %> members who share your interests.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                        </svg>
                    </div>
                    <h3>Exclusive Shop</h3>
                    <p>Browse and purchase exclusive avatar decorations and profile effects.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                    </div>
                    <h3>24/7 Active</h3>
                    <p>Our community is always buzzing with activity around the clock.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                        </svg>
                    </div>
                    <h3>Safe & Moderated</h3>
                    <p>Our dedicated staff ensures a safe and friendly environment.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" />
                        </svg>
                    </div>
                    <h3>Events & Giveaways</h3>
                    <p>Regular events, giveaways, and special activities for members.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                        </svg>
                    </div>
                    <h3>Friendly Chat</h3>
                    <p>Multiple channels for different topics and interests.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features alt-bg" id="features">
        <div class="section-container">
            <div class="section-header">
                <span class="section-badge">Shop</span>
                <h2 class="section-title">What We Offer</h2>
                <p class="section-description">Exclusive items available only in our server shop</p>
            </div>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">ðŸŽ¨</div>
                    <h3>Avatar Decorations</h3>
                    <p>Unique decorations to make your Discord avatar stand out.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">âœ¨</div>
                    <h3>Profile Effects</h3>
                    <p>Amazing effects to enhance your Discord profile.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">ðŸ“¦</div>
                    <h3>Bundles</h3>
                    <p>Special bundles with multiple items at discounted prices.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Shop CTA Section -->
    <section class="shop-cta">
        <div class="section-container">
            <div class="cta-content">
                <div class="cta-text">
                    <h2>Visit Our Shop</h2>
                    <p>Browse exclusive avatar decorations, profile effects, and bundles</p>
                </div>
                <a href="/shop" class="btn btn-primary btn-lg">
                    Open Shop
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="20" height="20">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                    </svg>
                </a>
            </div>
            <div class="cta-products">
                <% featuredProducts.slice(0, 3).forEach(product => { %>
                <div class="cta-product">
                    <img src="<%= product.previewImage %>" alt="<%= product.name %>">
                </div>
                <% }) %>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-brand">
                <img src="<%= guildIcon %>" alt="<%= guildName %>">
                <span><%= guildName %></span>
            </div>
            <div class="footer-links">
                <a href="#">Terms</a>
                <a href="#">Privacy</a>
                <a href="#">Support</a>
                <a href="https://discord.gg/your-invite" target="_blank">Discord</a>
            </div>
            <p class="footer-copy">Â© 2026 <%= guildName %>. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Theme Toggle
        const themeToggle = document.getElementById('themeToggle');
        const html = document.documentElement;
        
        // Check saved theme or system preference
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme) {
            html.setAttribute('data-theme', savedTheme);
        } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
            html.setAttribute('data-theme', 'dark');
        }
        
        themeToggle.addEventListener('click', () => {
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        });
        
        // Mobile Menu Toggle
        const navToggle = document.querySelector('.nav-toggle');
        const navLinks = document.querySelector('.nav-links');
        
        if (navToggle && navLinks) {
            navToggle.addEventListener('click', () => {
                navToggle.classList.toggle('active');
                navLinks.classList.toggle('active');
                document.body.style.overflow = navLinks.classList.contains('active') ? 'hidden' : '';
            });
            
            // Close menu when clicking a link
            navLinks.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    navToggle.classList.remove('active');
                    navLinks.classList.remove('active');
                    document.body.style.overflow = '';
                });
            });
        }
        
        // Preloader
        window.addEventListener('load', () => {
            const preloader = document.getElementById('preloader');
            setTimeout(() => {
                preloader.classList.add('hidden');
            }, 500);
        });
        
        // Page Transition for internal links
        const pageTransition = document.getElementById('pageTransition');
        document.querySelectorAll('a[href^="/"]').forEach(link => {
            link.addEventListener('click', (e) => {
                const href = link.getAttribute('href');
                // Skip hash links and same page
                if (href.startsWith('#') || href === window.location.pathname) return;
                
                e.preventDefault();
                pageTransition.classList.add('active');
                
                setTimeout(() => {
                    window.location.href = href;
                }, 300);
            });
        });
        
        // Hide transition on page show (back button)
        window.addEventListener('pageshow', (e) => {
            if (e.persisted) {
                pageTransition.classList.remove('active');
            }
        });
    </script>
</body>
</html>
